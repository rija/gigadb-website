# acceptance.suite.yml
namespace: common\tests
suite_namespace: common\tests\acceptance
bootstrap: false
actor: AcceptanceTester
modules:
    enabled:
        - common\tests\Helper\DbExtendedWithHooks:
            dsn: 'pgsql:host=database;dbname=gigadb'
            user: 'gigadb'
            password: 'vagrant'
            # dump: tests/_data/gigadb_bootstrap.sql
            cleanup: false # don't reload dump between tests
            populate: false # don't load dump before all tests
            databases:
                fuwdb:
                    dsn: 'pgsql:host=database;dbname=fuwdb'
                    user: 'fuwdb'
                    password: 'yii2advanced'
                    cleanup: false # don't reload dump between tests
                    populate: false # don't load dump before all tests
                    reconnect: false
                    waitlock: 10
        - WebDriver:
             url: 'http://gigadb.test'
             window_size: 1440x900
             # host: 'phantomjs'
             # port: 8910
             # browser: phantomjs
             # host: 'firefox'
             # port: 4444
             # browser: firefox'
             host: 'chrome'
             port: 4444
             browser: chrome
             capabilities:
                "goog:chromeOptions":
                    args: ['--headless']
                    w3c: false
        - Filesystem
        - common\tests\Helper\FilesystemCleanupHook
        - Yii2:
            part: init
gherkin:
    contexts:
        default:
            - common\tests\AcceptanceTester
        role:
            curator:
                - common\tests\Step\Acceptance\CuratorSteps
            author:
                - common\tests\Step\Acceptance\AuthorSteps
                - common\tests\Step\Acceptance\MetadataFormSteps

extensions:
    enabled:
        - Codeception\Extension\Recorder
